<% if (toast) { %>
    <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 1055;">
        <div class="toast align-items-center text-white bg-<%= toast.type === 'error' ? 'danger' : 'success' %> border-0"
            role="alert" aria-live="assertive" aria-atomic="true">
            <div class="d-flex">
                <div class="toast-body">
                    <%= toast.message %>
                </div>
                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"
                    aria-label="Close"></button>
            </div>
        </div>
    </div>
    <% } %>

        <div class="main-div d-flex align-items-center justify-content-center bg-light mt-5">
            <form class="signup-form shadow-lg p-5 bg-white rounded-3" method="POST" action="/signup" novalidate>
                <div class="text-center mb-4">
                    <i class="fas fa-leaf fa-2x text-success mb-2"></i>
                    <h2 class="fw-bold">Paradise Villa</h2>
                </div>

                <div class="row mb-1">
                    <div class="col-md-6">
                        <label class="form-label">First Name</label>
                        <input type="text" name="firstName" class="form-control" placeholder="Enter first name"
                            value="<%= data && data.firstName ? data.firstName : '' %>" />
                        <% if (errors.firstName) { %>
                            <p class="text-danger">
                                <%= errors.firstName.msg %>
                            </p>
                            <% } %>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Last Name</label>
                        <input type="text" name="lastName" class="form-control" placeholder="Enter last name"
                            value="<%= data && data.lastName ? data.lastName : '' %>" />
                        <% if (errors.lastName) { %>
                            <p class="text-danger mt-2">
                                <%= errors.lastName.msg %>
                            </p>
                            <% } %>
                    </div>
                </div>

                <div class="mb-1">
                    <label class="form-label">Email</label>
                    <input type="email" name="email" class="form-control" placeholder="Enter email"
                        value="<%= data && data.email ? data.email : '' %>" />
                    <% if (errors.email) { %>
                        <p class="text-danger mt-2">
                            <%= errors.email.msg %>
                        </p>
                        <% } %>
                </div>

                <div class="mb-1">
                    <label class="form-label">Password</label>
                    <div class="position-relative">
                        <input type="password" name="password" class="form-control pe-5" placeholder="Create password"
                            id="password" value="<%= data.password %>" />
                        <button type="button" class="show-btn-inside" onclick="togglePassword('password', 'eye1')">
                            <i id="eye1" class="fa-solid fa-eye"></i>
                        </button>
                    </div>
                    <% if (errors.password) { %>
                        <p class="text-danger mt-2">
                            <%= errors.password.msg %>
                        </p>
                        <% } %>
                </div>

                <div class="mb-4">
                    <label class="form-label">Confirm Password</label>
                    <div class="position-relative">
                        <input type="password" name="confirmPassword" class="form-control pe-5"
                            placeholder="Re-enter password" id="confirmPassword" value="<%= data.confirmPassword %>" />
                        <button type="button" class="show-btn-inside"
                            onclick="togglePassword('confirmPassword', 'eye2')">
                            <i id="eye2" class="fa-solid fa-eye"></i>
                        </button>
                    </div>
                    <% if (errors.confirmPassword) { %>
                        <p class="text-danger mt-2">
                            <%= errors.confirmPassword.msg %>
                        </p>
                        <% } %>
                </div>

                <div class="d-grid">
                    <button type="submit" class="btn btn-success btn-lg">
                        Join as Guest
                    </button>
                </div>

                <div class="text-center mt-3">
                    <p class="small text-muted">
                        Already have an account?
                        <a href="/login" class="text-success">Log in</a>
                    </p>
                </div>
            </form>
        </div>

        <script>
            function togglePassword(inputId, iconId) {
                const input = document.getElementById(inputId);
                const icon = document.getElementById(iconId);
                if (input.type === "password") {
                    input.type = "text";
                    icon.classList.remove("fa-eye");
                    icon.classList.add("fa-eye-slash");
                } else {
                    input.type = "password";
                    icon.classList.remove("fa-eye-slash");
                    icon.classList.add("fa-eye");
                }
            }

            document.addEventListener("DOMContentLoaded", function () {
                const toastEl = document.querySelector('.toast');
                if (toastEl) {
                    const toast = new bootstrap.Toast(toastEl, { delay: 3000 });
                    toast.show();
                }
            });
        </script>